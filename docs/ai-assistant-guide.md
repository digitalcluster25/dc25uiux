# AI Помощник для компонентов

Руководство по использованию AI помощника для подбора компонентов DC25 UI/UX.

## Обзор

AI помощник использует нейросети для анализа запросов пользователей и рекомендации подходящих компонентов из библиотеки DC25 UI/UX. Поддерживает OpenRouter и KiloCode API.

## Поддерживаемые нейросети

### 1. OpenRouter
- **Модели**: Claude 3.5 Sonnet, GPT-4, Llama 3.1
- **Преимущества**: Высокое качество анализа, понимание контекста
- **Использование**: Рекомендации компонентов, анализ кода, генерация компонентов

### 2. KiloCode
- **Модели**: Специализированные модели для кода
- **Преимущества**: Фокус на разработке, паттерны и лучшие практики
- **Использование**: Анализ кодовой базы, рефакторинг, оптимизация

## Настройка

### 1. Получение API ключей

#### OpenRouter
1. Зарегистрируйтесь на [OpenRouter](https://openrouter.ai)
2. Получите API ключ в разделе Keys
3. Добавьте ключ в переменные окружения

#### KiloCode
1. Зарегистрируйтесь на [KiloCode](https://kilocode.com)
2. Получите API ключ в личном кабинете
3. Добавьте ключ в переменные окружения

### 2. Конфигурация

Создайте файл `.env` на основе `env.example`:

```bash
# AI Assistant API Keys
VITE_OPENROUTER_API_KEY=your_openrouter_api_key_here
VITE_KILOCODE_API_KEY=your_kilocode_api_key_here
```

### 3. Запуск

```bash
npm run dev
```

Откройте http://localhost:3000/ai

## Использование

### 1. Основной интерфейс

#### Поле запроса
Опишите что вам нужно:
```
"Мне нужна форма входа с полями email и пароль"
"Создай модальное окно для подтверждения"
"Покажи данные в таблице с фильтрами"
```

#### Контекст
Дополнительная информация о проекте:
```
"Проект на React + TypeScript"
"Нужна поддержка темной темы"
"Компонент для мобильного приложения"
```

### 2. Функции AI помощника

#### Рекомендация компонентов
- Анализирует запрос
- Подбирает подходящие компоненты
- Объясняет выбор
- Предлагает альтернативы
- Показывает пример кода

#### Генерация кода
- Создает готовые компоненты
- Использует TypeScript
- Применяет Tailwind CSS
- Следует лучшим практикам

#### Анализ кода
- Анализирует существующий код
- Предлагает улучшения
- Выявляет проблемы
- Рекомендует оптимизации

#### Предложения по улучшению
- Архитектурные советы
- Паттерны проектирования
- Лучшие практики
- Оптимизация производительности

### 3. Примеры использования

#### Простой запрос
```
Запрос: "Кнопка для отправки формы"
Результат: Button компонент с вариантами
```

#### Сложный запрос
```
Запрос: "Дашборд с таблицей данных и фильтрами"
Результат: 
- DataTable для отображения
- FilterGroup для фильтров
- SearchBar для поиска
- Pagination для навигации
```

#### Генерация кода
```
Запрос: "Форма регистрации"
Результат: Готовый компонент с полями, валидацией и стилизацией
```

## Архитектура

### 1. Компоненты

```
src/ai/
├── openrouter-client.ts    # OpenRouter API клиент
├── kilocode-client.ts      # KiloCode API клиент
└── ai-assistant.ts         # Основной AI помощник

src/hooks/
└── useAIAssistant.ts       # React хук для AI

src/components/ai/
└── AIAssistant.tsx         # UI компонент

src/pages/
└── AIAssistant.tsx         # Страница AI помощника
```

### 2. Поток данных

```
Пользователь → AIAssistant → useAIAssistant → AIAssistant → OpenRouter/KiloCode
                ↓
            Результат → UI → Пользователь
```

### 3. Кэширование

- Кэширует результаты запросов
- Ускоряет повторные запросы
- Ограничивает размер кэша
- Поддерживает очистку

## API Reference

### useAIAssistant Hook

```typescript
const {
  loading,
  error,
  response,
  recommendComponents,
  analyzeCode,
  generateComponent,
  suggestImprovements,
  clearCache,
  getCacheStats,
  isConfigured
} = useAIAssistant(options)
```

#### Параметры
- `openrouterApiKey`: API ключ OpenRouter
- `kilocodeApiKey`: API ключ KiloCode
- `defaultProvider`: Провайдер по умолчанию
- `fallbackToRules`: Использовать правила как fallback
- `cacheEnabled`: Включить кэширование
- `maxCacheSize`: Максимальный размер кэша

#### Методы
- `recommendComponents(description, context?, preferences?)`: Рекомендация компонентов
- `analyzeCode(code)`: Анализ кода
- `generateComponent(description, props?)`: Генерация компонента
- `suggestImprovements(component)`: Предложения по улучшению
- `clearCache()`: Очистка кэша
- `getCacheStats()`: Статистика кэша

### AIAssistant Component

```typescript
<AIAssistant 
  openrouterApiKey={apiKey}
  kilocodeApiKey={apiKey}
  className="custom-class"
/>
```

## Лучшие практики

### 1. Формулировка запросов

#### ✅ Хорошо
```
"Форма входа с полями email и пароль"
"Модальное окно для подтверждения удаления"
"Таблица с сортировкой и пагинацией"
```

#### ❌ Плохо
```
"Сделай форму"
"Нужен попап"
"Покажи данные"
```

### 2. Использование контекста

#### ✅ Хорошо
```
Контекст: "Проект на React + TypeScript, нужна поддержка темной темы"
```

#### ❌ Плохо
```
Контекст: "Проект"
```

### 3. Работа с результатами

#### ✅ Хорошо
- Изучайте объяснения AI
- Рассматривайте альтернативы
- Адаптируйте примеры кода
- Проверяйте уверенность AI

#### ❌ Плохо
- Слепо копируйте код
- Игнорируйте альтернативы
- Не проверяйте результат

## Troubleshooting

### Частые проблемы

#### 1. "AI Assistant не инициализирован"
**Причина:** Не настроены API ключи
**Решение:** Добавьте ключи в `.env` файл

#### 2. "Ошибка API"
**Причина:** Неверный ключ или проблемы с сетью
**Решение:** Проверьте ключи и подключение

#### 3. "Нет рекомендаций"
**Причина:** AI не понимает запрос
**Решение:** Переформулируйте запрос, добавьте контекст

#### 4. "Медленная работа"
**Причина:** Большие запросы или проблемы с API
**Решение:** Упростите запрос, проверьте статус API

### Отладка

#### 1. Проверка конфигурации
```typescript
const { isConfigured } = useAIAssistant()
console.log('Configured:', isConfigured)
```

#### 2. Логирование ошибок
```typescript
const { error } = useAIAssistant()
if (error) {
  console.error('AI Error:', error)
}
```

#### 3. Статистика кэша
```typescript
const { getCacheStats } = useAIAssistant()
const stats = getCacheStats()
console.log('Cache stats:', stats)
```

## Расширение функциональности

### 1. Добавление новых провайдеров

```typescript
// Создайте новый клиент
export class NewProviderClient {
  async recommendComponents(query: string) {
    // Реализация
  }
}

// Добавьте в AIAssistant
private newProviderClient?: NewProviderClient
```

### 2. Кастомные правила

```typescript
// Добавьте в getFallbackRecommendation
if (keywords.includes('кастомное_слово')) {
  return {
    components: ['CustomComponent'],
    // ...
  }
}
```

### 3. Интеграция с другими системами

```typescript
// Добавьте методы для интеграции
async integrateWithDesignSystem(components: string[]) {
  // Интеграция с дизайн-системой
}
```

## Безопасность

### 1. API ключи
- Не коммитьте ключи в репозиторий
- Используйте переменные окружения
- Ограничивайте доступ к ключам

### 2. Данные пользователей
- Не отправляйте чувствительные данные
- Используйте кэширование для оптимизации
- Соблюдайте политику конфиденциальности

### 3. Валидация
- Проверяйте входные данные
- Валидируйте ответы AI
- Используйте fallback для ошибок

## Производительность

### 1. Оптимизация запросов
- Используйте кэширование
- Ограничивайте размер запросов
- Группируйте похожие запросы

### 2. Мониторинг
- Отслеживайте время ответа
- Мониторьте использование API
- Анализируйте качество ответов

### 3. Масштабирование
- Используйте несколько провайдеров
- Реализуйте балансировку нагрузки
- Добавляйте fallback механизмы

## Полезные ссылки

- [OpenRouter Documentation](https://openrouter.ai/docs)
- [KiloCode Documentation](https://kilocode.com/docs)
- [React Hooks Guide](https://reactjs.org/docs/hooks-intro.html)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)

---

**Совет:** Начните с простых запросов и постепенно усложняйте их для лучшего понимания возможностей AI помощника.
